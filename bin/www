#!/usr/bin/env node

/**
 * Module dependencies.
 */
var fs = require('fs');
var app = require('../app');
var debug = require('debug')('snake:server');
var http = require('http');
var https = require('https');

/**
 * Option for HTTPS
 */
var options = {
  key: fs.readFileSync('key.pem'),
  cert: fs.readFileSync('cert.pem')
};

/**
 * Create HTTP server.
 */
var server = http.createServer(app).listen(8888);

/**
 * create HTTPS server
 */
var server1 = https.createServer(options,app).listen(8000);

var WebSocketServer = require('ws').Server
    , wss = new WebSocketServer({server: server1});
console.log("websocket server created")
wss.on('connection', function(ws) {
  ws.on('message', function(message) {
    console.log('received: %s', message);
  });
  ws.send('something');
});